{"version":3,"sources":["feed/src/FeedWidget.js"],"names":["$","Craft","FeedWidget","Garnish","Base","extend","$widget","widgetId","addClass","this","limit","url","postActionRequest","textStatus","data","proxy","response","find","removeClass","items","dir","widgetHtml","$tds","i","length","title","$td","href","item","permalink","target","text","get","outerHTML","date","html","jQuery"],"mappings":"CAAA,SAACA,GAEGC,MAAAC,WAAAC,QAAAC,KAAAC,OACMH,CAESI,QADX,KAIaA,KAAL,SAAiBC,EAAYA,EAAAA,GACxBD,KAAQE,QAASR,EAAA,UAAtBO,GAEQE,KAAGH,QAAAE,SAAA,WAEAE,IAAAA,EAAAA,CAFXC,IAAAA,EAKMC,MAAAA,GAGEC,MAAUD,kBAAgB,2BAAAE,EAAAd,EAAAe,OAAA,SAAAC,EAAAH,GAA9B,GACSP,KAAQW,QAAKC,YACR,WAFK,YAAfL,EAA0B,CAM1BJ,KAAiBH,QAAGU,KAASG,SACdH,KAASG,MAApBH,EAAAI,KAKY,IAFRC,IAAUC,EAAKb,KAAQH,QAAAW,KAAA,MAAAM,EAAA,EAAAA,EAAAP,EAAAG,MAAAK,OAAAD,IAAA,CAGZE,IAAAA,EAAAA,EAAAA,MAAAA,GAHEC,EAAjB1B,EAAAsB,EAAAC,IAMeF,EAAArB,EAAA,OAAA,CACG2B,KAAAC,EAAAC,UACjBC,OAAA,SALGC,KAAMH,EAAKH,QAOfO,IAAA,GAAAC,UAAA,IAEPL,EAAAM,OAzBLb,GAAA,8BAAAO,EAAAM,KAAA,WAhBhBR,EAAAS,KAAAd,OA0CmBZ,UA1CnB,CA6CG2B","file":"FeedWidget.min.js","sourcesContent":["(function($) {\n    /** global: Craft */\n    /** global: Garnish */\n    Craft.FeedWidget = Garnish.Base.extend(\n        {\n            $widget: null,\n\n            init: function(widgetId, url, limit) {\n                this.$widget = $('#widget' + widgetId);\n                this.$widget.addClass('loading');\n\n                var data = {\n                    url: url,\n                    limit: limit\n                };\n\n                Craft.postActionRequest('dashboard/get-feed-items', data, $.proxy(function(response, textStatus) {\n                    this.$widget.removeClass('loading');\n\n                    if (textStatus === 'success') {\n                        this.$widget.find('table')\n                            .attr('dir', response.dir);\n\n                        var $tds = this.$widget.find('td');\n\n                        for (var i = 0; i < response.items.length; i++) {\n                            var item = response.items[i],\n                                $td = $($tds[i]);\n\n                            var widgetHtml = $('<a/>', {\n                                href: item.permalink,\n                                target: '_blank',\n                                text: item.title\n                            }).get(0).outerHTML + ' ';\n\n                            if (item.date) {\n                                widgetHtml += '<span class=\"light nowrap\">' + item.date + '</span>';\n                            }\n\n                            $td.html(widgetHtml);\n                        }\n                    }\n                }, this));\n            }\n        });\n})(jQuery);\n"]}