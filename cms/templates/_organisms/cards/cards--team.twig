{%- set showVacancies = showVacancies ??? false -%}

{%- set team = craft.entries.section('team')
    .with(['teaserImage', 'skillCategories'])
    .orderBy('sortingOrder asc, startDate asc')
    .all() -%}

<section class="my-16 w-full">

    <div class="container mx-auto">

        <div class="flex flex-wrap -mx-8">

            {% for member in team %}

                {%- include '_molecules/cards/card--member' ignore missing with {
                    member: member,
                    sizes: ['33.3vw'],
                    utilities: 'w-full sm:w-1/2 lg:w-1/3 px-8 mb-8',
                } -%}

            {% endfor %}

            {% if showVacancies %}
                {%- set vacancies = craft.entries.section('pages').type('vacanciesPage').with('metaImage', 'pageBuilder').one() -%}

                {# TODO fetch all skills from all available vacancies #}

                {%- set member = {
                    url: vacancies.url,
                    title: vacancies.title,
                    role: 'Want to work for us?',
                    colourSwatch: vacancies.colourSwatch,
                    teaserImage: vacancies.metaImage[0] ??? null,
                    skillCategories: [], 
                } -%}

                {%- include '_molecules/cards/card--member' ignore missing with {
                    member: member,
                    utilities: 'w-full sm:w-1/2 lg:w-1/3 px-8 mb-8',
                    sizes: ['33.3vw'],
                } -%}

            {% endif %}

        </div>



    </div>

</section>
