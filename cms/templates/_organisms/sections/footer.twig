{% import '_macros/atoms' as atom %}

{% set nodes = craft.navigation.nodes()
    .handle('footerNavigation')
    .level(1)
    .all() %}

{%- set legalNodes = craft.navigation.nodes()
    .handle('legalNavigation')
    .level(1)
    .all()
-%}

{%- set clients = entry.clientFooterBuilder.all() ?? null -%}

<footer class="w-full absolute z-30 bg-white">

    <div class="{{clients ? "block" : "hidden" }} bg-gray-300 py-16 px-8">
        <div class="container max-w-screen-xl mx-auto">
            <div class="client flex flex-wrap lg:flex-no-wrap justify-between w-full">
            {%- for client in clients -%}
                {{- atom.client_logo(client.logo[0], client.clientUrl, client.description|striptags) -}} 
            {%- endfor -%} 
            </div>
        </div>
    </div>

    <div class="max-w-screen-xxl border-t border-gray-400">
        <div class="flex justify-center text-gray-400 -mt-10">
            <svg class="stroke-current" width="65" height="74" viewBox="0 0 65 74">
                <path d="M34.385,1.26l27.21,15.709a5.292,5.292,0,0,1,2.392,4.143V52.531a5.291,5.291,0,0,1-2.392,4.142L34.384,72.383a5.289,5.289,0,0,1-4.783,0L2.392,56.674A5.291,5.291,0,0,1,0,52.531V21.112A5.292,5.292,0,0,1,2.392,16.97L29.6,1.261A5.29,5.29,0,0,1,34.385,1.26Z" 
                transform="translate(0.5 -0.065)" fill="#fff" stroke="currentColor" stroke-width="1"/>
            </svg>
        </div>
        <div class="text-center font-mono text-red-800 pt-10">
            made with &#9829 by Percipio
        </div>
        <div class="flex text-gray-700 justify-center md:justify-around pt-10 pb-20">
            <div class="flex justify-center md:content-around whitespace-no-wrap">
                {%- for node in nodes -%}
                     <div class="mx-4 md:mx-6 lg:mx-10 md:p-2 md:w-1/5 font-bold mb-6 tracking-wide uppercase leading-relaxed">
					    <div class=" y-4 text-lg">
                            <a 	href="{{- node.url -}}" 
                                title="{{- node.title -}}"
                                {% if node.newWindow -%}target="_blank" rel="noopener noreferrer"{%- endif %}  
                            >
                                {{- node.title -}}
                            </a>
                        </div>
                        {% if node.hasDescendants %}
                            <div class="flex flex-col text-gray-600 normal-case leading-relaxed">
                                {% for subnode in node.children %}
                                    <a 	href="{{- subnode.url -}}" 
							            title="{{- subnode.title -}}"
                                        {% if subnode.newWindow -%}target="_blank" rel="noopener noreferrer"{%- endif %}
                                        class="my-1" 
                                    >
                                        {{- subnode.title -}}
						            </a>
                                 {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                {%- endfor -%}
            </div>
        </div>
    </div>

    <div class="border-t border-gray-400 px-4 md:px-10 py-8 text-xs text-gray-600">
        <div class="flex items-center justify-between ">
            Copyright 2020. Percipio is a Trademark of Percipio Global Ltd
            <div class="md:flex md:justify-end">
                {%- for node in legalNodes -%}
                <div class="md:mx-4">
                    <a href="{{- node.url -}}"
                        title="{{- node.title -}}"
                        {% if node.newWindow -%}target="_blank" rel="noopener noreferrer"{%- endif %}
                    >
                        {{- node.title -}}
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</footer>
