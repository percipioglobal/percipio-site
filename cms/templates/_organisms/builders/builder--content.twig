{%- do craft.eagerBeaver.eagerLoadElements(entry,
    [
        'contentBuilder',
        'contentBuilder.contentCta',
        'contentBuilder.contentCta:image',
        'contentBuilder.highlightCards:cards',
        'contentBuilder.highlightCards:cards.cardImage',
        'contentBuilder.galleryImages:images',
        'contentBuilder.gridContent:gridItems',
        'contentBuilder.gridContentAnimation:gridItems',
        'contentBuilder.gridContentAnimation:gridItems.image',
        'contentBuilder.gridContentImageHalfBackground:gridItems',
        'contentBuilder.gridContentImageHalfBackground:gridItems.image',
        'contentBuilder.gridContentImageThird:gridItems',
        'contentBuilder.gridContentImageThird:gridItems.image',
        'contentBuilder.singleImage:.image',
    ])
-%}

{%- minify -%}

    {%- for block in content.contentBuilder -%}

        {{block.type}}

        {%- switch block.type -%}

            {%- case 'article' -%}

                {%- include '_molecules/content/content--article' ignore missing with {
                    content: block.article,
                } -%}

            {%- case 'blockQuote' -%}

                {%- include '_molecules/quotes/quote--block' ignore missing with {
                    content: block.article,
                } -%}

            {%- case 'code' -%}

                {%- include '_molecules/content/content--code' ignore missing with {
                    code: block.code ??? '',
                    language: block.codeLanguage ??? '',
                    filename: block.filename ??? ''
                } -%}

            {%- case 'contentCta' -%}

                {%- set background = swatch(block.background) -%}

                {# check which cta should be loaded #}
                {%- set component = block.ctaImage.count() == 0 ? '_organisms/ctas/cta--text' : '_organisms/ctas/cta--image' -%}

                {%- include component ignore missing with {
                    heading: block.heading ??? '',
                    content: block.body ??? '',
                    button: block.target ??? null,
                    background: background,
                    image: block.ctaImage ??? null
                } -%}

            {%- case 'galleryImages' -%}

                {%- include '_organisms/grids/grid--gallery' ignore missing with {
                    images: block.images
                } -%}

            {%- case 'gridContent' -%}

                {%- include '_organisms/grids/grid--content' ignore missing with {
                    items: block
                } -%}

            {%- case 'gridContentAnimation' -%}

                {%- include '_organisms/grids/grid--content-animation' ignore missing with {
                    items: block
                } -%}

            {%- case 'gridContentImageHalfBackground' -%}

                {%- include '_organisms/grids/grid--content-image-half-background' ignore missing with {
                    items: block
                } -%}

            {%- case 'gridContentImageHalf' -%}

                {%- include '_organisms/grids/grid--content-image-half' ignore missing with {
                    items: block
                } -%}

            {%- case 'gridContentImageThird' -%}

                {%- include '_organisms/grids/grid--content-image-third' ignore missing with {
                    items: block
                } -%}

            {%- case 'highlightCards' -%}

                {%- include '_organisms/grids/grid--highlight-cards' ignore missing with {
                    cards: block.cards,
                } -%}

            {%- case 'sectionHeader' -%}

                {%- include '_molecules/content/content--section-header' ignore missing with {
                    content: block,
                } -%}

            {%- case 'singleImage' -%}

                {%- include '_molecules/images/image--article' ignore missing with {
                    image: block.image,
                } -%}

            {%- case 'standfirst' -%}

                {%- include '_molecules/content/content--standfirst' ignore missing with {
                    content: block,
                } -%}

        {%- endswitch -%}

    {%- endfor -%}

{%- endminify -%}
