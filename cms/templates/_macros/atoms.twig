{# Button - takes url, text, class ( for background-color / text-color + hover ), icon ( font-awesome class ) and icon position ( left or right ) #}
{% macro button(url, text, class, icon = null, position = 'left') %}
    {% import _self as atom %}
    {% spaceless %}
        <a href="{{- url -}}" class="flex rounded-full font-medium text-base uppercase tracking-widest px-8 py-4 mr-2 transition-colors duration-150 ease-in-out {{ class -}}">
            {%- if icon and position == 'left' -%}
                <span class="inline-flex mr-4">
                    <i class="{{- icon -}}"></i>
                </span>
            {%- endif -%}
            <span>
                {{- atom.text(text) -}}
            </span>
            {%- if icon and position == 'right' -%}
                <span class="inline-flex ml-4">
                    <i class="{{- icon -}}"></i>
                </span>
            {%- endif -%}
        </a>
    {% endspaceless %}
{% endmacro %}

{# Date #}
{% macro formatDate(date) %}
    {% spaceless %}
        {{- date | date('j F, Y') -}}
    {% endspaceless %}
{% endmacro %}

{# Logos #}
{% macro logo(type = 'logo') %}
    {% spaceless %}
        {% set logo = type == 'logo' ? brand.logo.one() : brand.icon.one() %}
        <a href="{{- alias('@web') ~ '/' -}}" class="block relative z-1 {{ type == 'logo' ? 'w-48 h-6' : 'w-12 h-12' -}}">
            {{ svg(logo) }}
        </a>
    {% endspaceless %}
{% endmacro %}

{# Partner Logos #}
{% macro client_logo(logo, entryType, url, title) %}
    {% spaceless %}
        {% if logo.extension == 'svg' %}
            <a href="{{- url -}}" 
                class="block relative {{ entryType == 'projects' ? 'w-1/3' : 'h-20 md:h-24 lg:h-32 p-4 w-1/2 md:w-1/3 lg:w-1/6' }}  focus:outline-none" 
                title="{{- title -}}"
                data-tag-category="link"
                data-tag-action="external"
                data-tag-label="{{- title -}}">
                <img src="{{- logo.url -}}" class="object-contain h-full mx-0 md:mx-auto lazyload" alt="{{- title -}}" >
            </a>
        {% else %}
            <span>invalid filetype</span>
        {% endif %}
    {% endspaceless %}
{% endmacro %}
{# Hero Image #}
{% macro hero_image(heroImage, alt = '', ratio = 'is16by9') %}
    {% set image = heroImage.optimizeHeroes %}
    {% spaceless %}
        <figure role="figure" aria-label="{{- alt -}}" class="relative w-full h-full">
            <div class="img {{ ratio }} static">
                <img  src="{{- image.placeholderImage() -}}"
                        data-src="{{- image.src() -}}"
                        data-srcset="{{- image.srcset() -}}"
                        sizes="100vw"
                        alt="{{- alt -}}"
                        class="object-cover min-w-full min-h-full w-full h-full z-1 lazyload">
            </div>
        </figure>
    {% endspaceless %}
{% endmacro %}

{# Article Image #}
{% macro article_image(articleImage, alt = '', ratio = null, caption = null, author = null, source = null) %}
    {% import _self as atom %}
    {% set image = articleImage.optimizeArticles %}
    {% spaceless %}
        <figure role="figure" aria-labelledby="{{- alt ~ '-' ~ articleImage.id -}}" class="w-full h-full">
            <div class="img {{ ratio -}}">
                <img  src="{{- image.placeholderImage() -}}"
                    data-src="{{- image.src() -}}"
                    data-srcset="{{- image.srcset() -}}"
                    sizes="100vw"
                    alt="{{- alt -}}"
                    class="object-cover lazyload">
            </div>
        </figure>
    {% endspaceless %}
{% endmacro %}

{# Teaser Image #}
{% macro teaser_image(teaserImage, alt = '') %}
    {% set image = teaserImage.optimizeTeasers %}
    {% spaceless %}
        <figure role="figure" aria-label="{{- alt -}}" class="relative w-full h-full">
            <div class="img is1by1">
                <img  src="{{- image.placeholderImage() -}}"
                    data-src="{{- image.src() -}}"
                    data-srcset="{{- image.srcset() -}}"
                    sizes="100vw"
                    alt="{{- alt -}}"
                    class="object-cover lazyload">
            </div>
        </figure>
    {% endspaceless %}
{% endmacro %}

{% macro featured_image(teaserImage, alt = '', ratio = 'is4by3') %}
    {% set image = teaserImage.optimizeTeasers %}
    {% spaceless %}
        <figure role="figure" aria-label="{{- alt -}}" class="relative w-full h-full">
            <div class="img {{ ratio }} static">
                <img  src="{{- image.placeholderImage() -}}"
                    data-src="{{- image.src() -}}"
                    data-srcset="{{- image.srcset() -}}"
                    sizes="100vw"
                    alt="{{- alt -}}"
                    loading="lazy"
                    class="object-cover lazyload">
            </div>
        </figure>
    {% endspaceless %}
{% endmacro %}

{# Profile Image #}
{% macro profile_image(profileImage, alt = '') %}
    {% set image = profileImage.optimizeProfileImages %}
    <figure role="figure" aria-label="{{- alt -}}" class="img overflow-hidden h-16 w-16 rounded-full">
        <img  src="{{- image.placeholderImage() -}}"
            data-src="{{- image.src() -}}"
            data-srcset="{{- image.srcset() -}}"
            sizes="25vw"
            alt="{{- alt -}}"
            class="lazyload">
    </figure>
{% endmacro %}

{# Render Text #}
{% macro text(content) %}
    {% spaceless %}
        {{ content | raw | typogrify }}
    {% endspaceless %}
{% endmacro %}

{# Render Title #}
{% macro title(content, words = 60) %}
    {% spaceless %}
        {{- content | escape | typogrify(true) | truncateOnWord(words) | raw -}}
    {% endspaceless %}
{% endmacro %}

{# figcaption #}

{% macro caption(content, author = null, source = null, id) %}
    {% spaceless %}
        <figcaption id="{{- id -}}" class="font-primary text-center lg:text-left text-sm text-gray-600 italic p-4 border-b border-gray-400">
            {{- content }}
            {% if author and source -%}
                &mdash; 
                <a href="{{ source.url }}">
                    <span>
                        {{ author -}}
                    </span>
                    <span class="inline-block ml-2">
                        <i class="far fa-external-link-alt"></i>
                    </span>
                </a>
            {%- elseif author -%}
                &mdash; {{ author -}}
            {% endif -%}
        </figcaption>
    {% endspaceless %}
{% endmacro %}