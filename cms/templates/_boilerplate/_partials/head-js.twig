{# -- Polyfills detected by User-Agent as per: https://polyfill.io/v2/docs/examples#feature-detection -- #}
<script src="https://cdn.polyfill.io/v3/polyfill.min.js?callback=polyfillsAreLoaded&flags=gated" defer async></script>

{# -- Register our Service Worker -- #}
{% if not craft.app.config.general.devMode %}
    {#-- Tag Manager --#}
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','{{- gtmTrackingId -}}');</script>

    {% include "_boilerplate/_partials/register-service-worker.twig" %}
{% endif %}

{# -- Handle tabs gracefully as per https://hackernoon.com/removing-that-ugly-focus-ring-and-keeping-it-too-6c8727fefcd2 -- #}
{% include "_boilerplate/_partials/tab-handler.twig" %}

{# -- Tiny Cookie JavaScript -- #}
<script>
    {{ source("_inline-js/tiny-cookie.min.js") }}
</script>