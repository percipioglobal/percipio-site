{% import '_macros/atoms' as render %}
{% import '_macros/functions' as functions %}

{%- set asset = content.embed|length > 0 ? craft.embeddedAssets.get(content.embed[0]) : null -%}

{%- minify -%}
<div class="w-full text-center">

	<div class="container mx-auto max-w-screen-lg relative mb-8">
		<figure class="w-full {{ content.position == 'center' ? 'md:w-1/2 xl:w-1/3' : '' }} mx-auto">
			<div class="{{- asset.width and asset.height ? getRatioClass({width: asset.width, height: asset.height}) : 'aspect-w-16 aspect-h-9' }} relative">
				{{- functions.embed(asset) -}}
			</div>
			<div class="{{ content.position == 'center' ? 'lg:absolute left-0 top-0 w-full md:w-auto lg:max-w-1/4 xl:max-w-1/3 pr-3' : '' }}">
				{{- render.atom('text', 'caption', {
					caption: asset.title,
					id: asset.title|url_encode,
					swatch: swatch ??? null
				}) -}}
			</div>
		</figure>
	</div>
</div>
{%- endminify -%}
