{%- import '_macros/atoms' as atom -%}

{# Eager Load categories based on entry types #}
{%- switch entry.type -%}
    {%- case "news" -%}
        {%- do craft.eagerBeaver.eagerLoadElements(entry, [
            'newsCategories'
            ])
        -%}
    {%- case "project" -%}
        {%- do craft.eagerBeaver.eagerLoadElements(entry, [
            'projectCategories'
            ])
        -%}
    {%- case "teamMember" -%}
        {%- do craft.eagerBeaver.eagerLoadElements(entry, [
            'teamCategories'
            ])
        -%}
{%- endswitch -%}

{%- switch content.organisationName -%}
    {%- case "Research School Foundation" -%}
        {%- set color = 'red' -%}
    {%- case "Education Endowment Foundation" -%}
        {%- set color = 'orange' -%}
    {%- case "Harding Hub" -%}
        {%- set color = 'purple' -%}
    {%- case "Percipio Global" -%}
        {%- set color = 'teal' -%}
    {%- case "National Tutoring Programme" -%}
        {%- set color = 'Blue' -%}
    {% default %}
        {%- set color = 'gray' -%}
{%- endswitch -%}

{# Load needed images #}
{%- set teaserImage = content.teaserImage[0] ?? placeholder.teaserPlaceholder[0] -%}
{%- set news = content.type == 'news' ? true : false -%}

{%- minify -%}
    <div class="flex flex-col bg-{{color}}-500 text-white lg:grid grid-cols-2 grid-rows-1 col-span-3 relative h-full w-full mb-8 md:mb-0 shadow-md hover:shadow-2xl transition duration-200 ease-in-out">
        <div class="relative">
            <a href="{{- content.url -}}">
                {{- render.atom('image', 'teaser', { image: teaserImage, alt:teaserImage.title, news ? 'is4by3' : 'is2by1'  }) -}}
            </a>
        </div>
        <div class="flex flex-col flex-grow justify-between h-full text-left p-8">
            <div class="flex">
                <a href="{{- content.url -}}">
                    <h6 class="break-words font-mono text-white mb-1">
                        {{- render.atom('text', 'content', { content: content.organisationName }) -}}
                    </h6>
                    <h4 class="break-words text-4xl text-white font-extrabold mb-5">
                        {{- render.atom('text', 'content', { content: content.title }) -}}
                    </h4>
                    <h5 class="break-words text-lg font-secondary text-white leading-relaxed mb-8">
                        {{- render.atom('text', 'content', { content: content.description }) -}}
                    </h5>
                </a>
            </div>
            <div class="flex">
                <div class="mt-10 md:mt-16 flex flex-wrap">
                    {%- for category in content.projectCategories -%}
                        <span class="bg-{{color}}-700 mt-2 mr-2 px-4 py-2 rounded-full font-secondary text-white text-xs tracking-wide font-medium">
                            {{- category.title -}}
                        </span>
                    {%- endfor -%}
                </div>
            </div>
        </div>

    </div>
{%- endminify -%}